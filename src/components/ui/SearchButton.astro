---
// 搜索按钮组件
---

<button
  id="search-button"
  class="p-2 rounded-md text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 transition-colors"
  aria-label="搜索"
  title="搜索 (Ctrl+K)"
>
  <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
  </svg>
</button>

<!-- 搜索模态框 -->
<div id="search-modal" class="fixed inset-0 z-50 hidden">
  <!-- 背景遮罩 -->
  <div class="absolute inset-0 bg-black bg-opacity-50" id="search-backdrop"></div>
  
  <!-- 搜索框 -->
  <div class="absolute top-20 left-0 right-0 mx-auto max-w-2xl px-4">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden">
      <div class="flex items-center px-4 py-3 border-b border-gray-200 dark:border-gray-700">
        <svg class="h-5 w-5 text-gray-400 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
        <input
          type="text"
          id="search-input"
          class="flex-1 bg-transparent border-none outline-none text-gray-900 dark:text-white placeholder-gray-400"
          placeholder="搜索文章..."
          autocomplete="off"
        />
        <button
          id="search-close"
          class="p-1 rounded-md text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"
          aria-label="关闭搜索"
        >
          <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      
      <!-- 搜索结果 -->
      <div id="search-results" class="max-h-96 overflow-y-auto">
        <div class="p-4 text-center text-gray-500 dark:text-gray-400">
          输入关键词开始搜索...
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const searchButton = document.getElementById('search-button');
    const searchModal = document.getElementById('search-modal');
    const searchBackdrop = document.getElementById('search-backdrop');
    const searchClose = document.getElementById('search-close');
    const searchInput = document.getElementById('search-input');
    const searchResults = document.getElementById('search-results');
    
    // 打开搜索
    const openSearch = () => {
      searchModal.classList.remove('hidden');
      setTimeout(() => searchInput.focus(), 100);
    };
    
    // 关闭搜索
    const closeSearch = () => {
      searchModal.classList.add('hidden');
      searchInput.value = '';
      searchResults.innerHTML = '<div class="p-4 text-center text-gray-500 dark:text-gray-400">输入关键词开始搜索...</div>';
    };
    
    // 事件监听
    searchButton.addEventListener('click', openSearch);
    searchClose.addEventListener('click', closeSearch);
    searchBackdrop.addEventListener('click', closeSearch);
    
    // 键盘快捷键 (Ctrl+K 或 Cmd+K)
    document.addEventListener('keydown', (e) => {
      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
        e.preventDefault();
        if (searchModal.classList.contains('hidden')) {
          openSearch();
        } else {
          closeSearch();
        }
      }
      
      // ESC 键关闭搜索
      if (e.key === 'Escape' && !searchModal.classList.contains('hidden')) {
        closeSearch();
      }
    });
    
    // 搜索输入处理（这里只是示例，实际搜索逻辑需要根据搜索系统实现）
    searchInput.addEventListener('input', (e) => {
      const query = e.target.value.trim();
      
      if (query.length < 2) {
        searchResults.innerHTML = '<div class="p-4 text-center text-gray-500 dark:text-gray-400">输入至少2个字符开始搜索...</div>';
        return;
      }
      
      // 这里应该调用实际的搜索API
      // 暂时显示加载状态
      searchResults.innerHTML = '<div class="p-4 text-center text-gray-500 dark:text-gray-400">搜索中...</div>';
      
      // 模拟搜索结果
      setTimeout(() => {
        searchResults.innerHTML = `
          <div class="p-2">
            <div class="p-3 hover:bg-gray-50 dark:hover:bg-gray-700 rounded cursor-pointer">
              <h3 class="font-medium text-gray-900 dark:text-white">搜索结果示例</h3>
              <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">这是搜索结果的描述...</p>
            </div>
          </div>
        `;
      }, 500);
    });
  });
</script>