@tailwind base;
@tailwind components;
@tailwind utilities;

/* 全局变量 */
:root {
  /* 基础颜色 */
  --bg-primary: 255 255 255;
  --bg-secondary: 249 250 251;
  --bg-tertiary: 243 244 246;
  --text-primary: 17 24 39;
  --text-secondary: 75 85 99;
  --text-tertiary: 107 114 128;
  --border: 229 231 235;
  --border-secondary: 243 244 246;
  
  /* 主题色 */
  --accent: 59 130 246;
  --accent-hover: 37 99 235;
  --accent-light: 219 234 254;
  
  /* 卡片颜色 */
  --card-bg: 255 255 255;
  --card-border: 229 231 235;
  --card-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  
  /* 代码块颜色 */
  --code-bg: 243 244 246;
  --code-text: 17 24 39;
  --code-border: 209 213 219;
  
  /* 引用块颜色 */
  --quote-bg: 243 244 246;
  --quote-text: 75 85 99;
  --quote-border: 209 213 219;
  
  /* 表格颜色 */
  --table-header-bg: 249 250 251;
  --table-border: 229 231 235;
  
  /* 选择文本颜色 */
  --selection-bg: 219 234 254;
  --selection-text: 30 58 138;
  
  /* 滚动条颜色 */
  --scrollbar-thumb: 156 163 175;
  --scrollbar-track: transparent;
  
  /* 阴影 */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

/* 深色主题变量 */
[data-theme="dark"] {
  /* 基础颜色 */
  --bg-primary: 17 24 39;
  --bg-secondary: 31 41 55;
  --bg-tertiary: 55 65 81;
  --text-primary: 243 244 246;
  --text-secondary: 156 163 175;
  --text-tertiary: 107 114 128;
  --border: 55 65 81;
  --border-secondary: 75 85 99;
  
  /* 主题色 */
  --accent: 96 165 250;
  --accent-hover: 59 130 246;
  --accent-light: 30 58 138;
  
  /* 卡片颜色 */
  --card-bg: 31 41 55;
  --card-border: 55 65 81;
  --card-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  
  /* 代码块颜色 */
  --code-bg: 31 41 55;
  --code-text: 243 244 246;
  --code-border: 55 65 81;
  
  /* 引用块颜色 */
  --quote-bg: 31 41 55;
  --quote-text: 156 163 175;
  --quote-border: 55 65 81;
  
  /* 表格颜色 */
  --table-header-bg: 31 41 55;
  --table-border: 55 65 81;
  
  /* 选择文本颜色 */
  --selection-bg: 30 58 138;
  --selection-text: 219 234 254;
  
  /* 滚动条颜色 */
  --scrollbar-thumb: 75 85 99;
  --scrollbar-track: transparent;
  
  /* 阴影 */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
}

/* 系统主题变量 - 根据系统偏好自动应用 */
@media (prefers-color-scheme: dark) {
  [data-theme="system"] {
    /* 基础颜色 */
    --bg-primary: 17 24 39;
    --bg-secondary: 31 41 55;
    --bg-tertiary: 55 65 81;
    --text-primary: 243 244 246;
    --text-secondary: 156 163 175;
    --text-tertiary: 107 114 128;
    --border: 55 65 81;
    --border-secondary: 75 85 99;
    
    /* 主题色 */
    --accent: 96 165 250;
    --accent-hover: 59 130 246;
    --accent-light: 30 58 138;
    
    /* 卡片颜色 */
    --card-bg: 31 41 55;
    --card-border: 55 65 81;
    --card-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    
    /* 代码块颜色 */
    --code-bg: 31 41 55;
    --code-text: 243 244 246;
    --code-border: 55 65 81;
    
    /* 引用块颜色 */
    --quote-bg: 31 41 55;
    --quote-text: 156 163 175;
    --quote-border: 55 65 81;
    
    /* 表格颜色 */
    --table-header-bg: 31 41 55;
    --table-border: 55 65 81;
    
    /* 选择文本颜色 */
    --selection-bg: 30 58 138;
    --selection-text: 219 234 254;
    
    /* 滚动条颜色 */
    --scrollbar-thumb: 75 85 99;
    --scrollbar-track: transparent;
    
    /* 阴影 */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
  }
}

/* 基础样式 */
@layer base {
  html {
    scroll-behavior: smooth;
  }

  body {
    background-color: rgb(var(--bg-primary));
    color: rgb(var(--text-primary));
    transition: background-color 0.3s ease, color 0.3s ease;
    font-feature-settings: 'rlig' 1, 'calt' 1;
  }

  /* 标题样式 */
  h1, h2, h3, h4, h5, h6 {
    font-weight: 700;
    color: rgb(var(--text-primary));
    line-height: 1.25;
  }

  h1 {
    font-size: 1.875rem;
    line-height: 2.25rem;
  }

  @media (min-width: 768px) {
    h1 {
      font-size: 2.25rem;
      line-height: 2.5rem;
    }
  }

  h2 {
    font-size: 1.5rem;
    line-height: 2rem;
  }

  @media (min-width: 768px) {
    h2 {
      font-size: 1.875rem;
      line-height: 2.25rem;
    }
  }

  h3 {
    font-size: 1.25rem;
    line-height: 1.75rem;
  }

  @media (min-width: 768px) {
    h3 {
      font-size: 1.5rem;
      line-height: 2rem;
    }
  }

  h4 {
    font-size: 1.125rem;
    line-height: 1.75rem;
  }

  @media (min-width: 768px) {
    h4 {
      font-size: 1.25rem;
      line-height: 1.75rem;
    }
  }

  /* 段落样式 */
  p {
    color: rgb(var(--text-secondary));
    line-height: 1.625;
  }

  /* 链接样式 */
  a {
    color: rgb(var(--accent));
    font-weight: 500;
    transition: color 0.2s ease;
  }

  a:hover {
    color: rgb(var(--accent-hover));
  }

  /* 列表样式 */
  ul, ol {
    padding-left: 1.5rem;
    margin-top: 1rem;
    margin-bottom: 1rem;
  }

  li {
    margin-bottom: 0.5rem;
  }

  /* 引用样式 */
  blockquote {
    border-left: 4px solid rgb(var(--accent));
    padding-left: 1rem;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
    margin-top: 1rem;
    margin-bottom: 1rem;
    background-color: rgb(var(--quote-bg));
    font-style: italic;
    color: rgb(var(--quote-text));
  }

  /* 代码样式 */
  code {
    font-size: 0.875rem;
    padding-left: 0.375rem;
    padding-right: 0.375rem;
    padding-top: 0.125rem;
    padding-bottom: 0.125rem;
    border-radius: 0.25rem;
    background-color: rgb(var(--code-bg));
    color: rgb(var(--code-text));
  }

  pre {
    border-radius: 0.5rem;
    overflow-x: auto;
    margin-top: 1.5rem;
    margin-bottom: 1.5rem;
    background-color: rgb(var(--code-bg));
    border: 1px solid rgb(var(--code-border));
  }

  pre code {
    display: block;
    padding: 1rem;
    font-size: 0.875rem;
    background-color: transparent;
  }

  /* 表格样式 */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1.5rem;
    margin-bottom: 1.5rem;
  }

  th, td {
    border: 1px solid rgb(var(--table-border));
    padding-left: 1rem;
    padding-right: 1rem;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
    text-align: left;
  }

  th {
    background-color: rgb(var(--table-header-bg));
    font-weight: 600;
  }

  /* 分隔线样式 */
  hr {
    border: 0;
    border-top: 1px solid rgb(var(--border));
    margin-top: 2rem;
    margin-bottom: 2rem;
  }
}

/* 组件样式 */
@layer components {
  /* 卡片样式 */
  .card {
    background-color: rgb(var(--card-bg));
    border-radius: 0.5rem;
    border: 1px solid rgb(var(--card-border));
    box-shadow: var(--shadow-sm);
    transition: box-shadow 0.2s ease;
  }

  .card:hover {
    box-shadow: var(--shadow-md);
  }

  /* 按钮样式 */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding-left: 1rem;
    padding-right: 1rem;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
    border: 1px solid transparent;
    font-size: 0.875rem;
    font-weight: 500;
    border-radius: 0.375rem;
    outline: none;
    transition: all 0.2s ease;
  }

  .btn:focus {
    outline: 2px solid transparent;
    outline-offset: 2px;
  }

  .btn-primary {
    background-color: rgb(var(--accent));
    color: white;
  }

  .btn-primary:hover {
    background-color: rgb(var(--accent-hover));
  }

  .btn-primary:focus {
    box-shadow: 0 0 0 2px rgba(var(--accent), 0.5);
  }

  .btn-secondary {
    background-color: rgb(var(--bg-tertiary));
    color: rgb(var(--text-primary));
  }

  .btn-secondary:hover {
    background-color: rgb(var(--border));
  }

  .btn-secondary:focus {
    box-shadow: 0 0 0 2px rgba(var(--border), 0.5);
  }

  .btn-ghost {
    background-color: transparent;
    color: rgb(var(--text-secondary));
  }

  .btn-ghost:hover {
    background-color: rgb(var(--bg-secondary));
    color: rgb(var(--text-primary));
  }

  .btn-ghost:focus {
    box-shadow: 0 0 0 2px rgba(var(--bg-secondary), 0.5);
  }

  /* 输入框样式 */
  .input {
    width: 100%;
    padding-left: 0.75rem;
    padding-right: 0.75rem;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
    border: 1px solid rgb(var(--border));
    border-radius: 0.375rem;
    box-shadow: var(--shadow-sm);
    outline: none;
    background-color: rgb(var(--bg-primary));
    color: rgb(var(--text-primary));
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
  }

  .input:focus {
    border-color: rgb(var(--accent));
    box-shadow: 0 0 0 2px rgba(var(--accent), 0.2);
  }

  /* 标签样式 */
  .tag {
    display: inline-block;
    padding-left: 0.625rem;
    padding-right: 0.625rem;
    padding-top: 0.25rem;
    padding-bottom: 0.25rem;
    font-size: 0.75rem;
    font-weight: 500;
    border-radius: 9999px;
    background-color: rgba(var(--accent), 0.1);
    color: rgb(var(--accent));
  }

  /* 导航链接 */
  .nav-link {
    @apply px-3 py-2 rounded-md text-sm font-medium text-secondary hover:text-primary hover:bg-secondary transition-theme;
  }

  .nav-link-active {
    @apply text-accent bg-accent/10;
  }

  /* 主题过渡效果 */
  .transition-theme {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
  }
}

/* 工具类 */
@layer utilities {
  /* 文本选择样式 */
  ::selection {
    background-color: rgb(var(--selection-bg));
    color: rgb(var(--selection-text));
  }

  /* 滚动条样式 */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: rgb(var(--scrollbar-thumb)) transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: rgb(var(--scrollbar-thumb));
    border-radius: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: rgb(var(--text-tertiary));
  }

  /* 深色主题滚动条 */
  [data-theme="dark"] .scrollbar-thin {
    scrollbar-color: rgb(75 85 99) transparent;
  }

  [data-theme="dark"] .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: rgb(75 85 99);
  }

  [data-theme="dark"] .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: rgb(107 114 128);
  }

  /* 动画类 */
  .animate-fade-in {
    animation: fadeIn 0.5s ease-in-out;
  }

  .animate-slide-up {
    animation: slideUp 0.3s ease-out;
  }

  .animate-slide-down {
    animation: slideDown 0.3s ease-out;
  }

  .animate-scale-in {
    animation: scaleIn 0.2s ease-out;
  }

  /* 响应式容器 */
  .container {
    @apply max-w-4xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* 阅读宽度 */
  .prose {
    @apply max-w-none;
  }

  .prose p {
    @apply my-4;
  }

  .prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 {
    @apply mt-8 mb-4 first:mt-0;
  }

  .prose h1 {
    @apply text-3xl md:text-4xl;
  }

  .prose h2 {
    @apply text-2xl md:text-3xl;
  }

  .prose h3 {
    @apply text-xl md:text-2xl;
  }

  .prose h4 {
    @apply text-lg md:text-xl;
  }

  /* 过渡效果 */
  .transition-theme {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
  }

  /* 焦点样式 */
  .focus-ring {
    outline: 2px solid transparent;
    outline-offset: 2px;
  }

  .focus-ring:focus {
    outline: 2px solid rgb(var(--accent));
    outline-offset: 2px;
  }

  /* 阴影效果 */
  .shadow-theme {
    box-shadow: var(--shadow-sm);
  }

  .shadow-theme-md {
    box-shadow: var(--shadow-md);
  }

  .shadow-theme-lg {
    box-shadow: var(--shadow-lg);
  }

  /* 背景色 */
  .bg-primary {
    background-color: rgb(var(--bg-primary));
  }

  .bg-secondary {
    background-color: rgb(var(--bg-secondary));
  }

  .bg-tertiary {
    background-color: rgb(var(--bg-tertiary));
  }

  /* 文本色 */
  .text-primary {
    color: rgb(var(--text-primary));
  }

  .text-secondary {
    color: rgb(var(--text-secondary));
  }

  .text-tertiary {
    color: rgb(var(--text-tertiary));
  }

  /* 边框色 */
  .border-theme {
    border-color: rgb(var(--border));
  }

  .border-secondary {
    border-color: rgb(var(--border-secondary));
  }

  /* 主题色 */
  .text-accent {
    color: rgb(var(--accent));
  }

  .bg-accent {
    background-color: rgb(var(--accent));
  }

  .border-accent {
    border-color: rgb(var(--accent));
  }
}

/* 动画定义 */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { transform: translateY(10px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes slideDown {
  from { transform: translateY(-10px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes scaleIn {
  from { transform: scale(0.95); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}